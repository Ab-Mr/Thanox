<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Profile - Thanox</title> <link rel="shortcut icon" href="/Thanox/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/Thanox/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/Thanox/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/Thanox/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Profile | Thanox</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Profile" /> <meta property="og:locale" content="en" /> <meta property="og:site_name" content="Thanox" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Profile" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Profile","url":"/Thanox/docs/profile"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/Thanox/" class="site-title lh-tight"> Thanox </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/Thanox/" class="nav-list-link">欢迎使用Thanox</a></li><li class="nav-list-item"><a href="/Thanox/docs/intro" class="nav-list-link">应用介绍</a></li><li class="nav-list-item"><a href="/Thanox/docs/install_active" class="nav-list-link">安装与激活</a></li><li class="nav-list-item"><a href="/Thanox/docs/bg_start" class="nav-list-link">后台启动</a></li><li class="nav-list-item"><a href="/Thanox/docs/bg_restrict" class="nav-list-link">后台运行</a></li><li class="nav-list-item"><a href="/Thanox/docs/clean-tasks" class="nav-list-link">任务清理</a></li><li class="nav-list-item"><a href="/Thanox/docs/smart-freeze" class="nav-list-link">智能冻结</a></li><li class="nav-list-item"><a href="/Thanox/docs/privacy-cheat" class="nav-list-link">隐匿</a></li><li class="nav-list-item"><a href="/Thanox/docs/activity_trampoline" class="nav-list-link">移花接木</a></li><li class="nav-list-item active"><a href="/Thanox/docs/profile" class="nav-list-link active">Profile</a></li><li class="nav-list-item"><a href="/Thanox/docs/xmode" class="nav-list-link">乖巧模式</a></li><li class="nav-list-item"><a href="/Thanox/docs/feedback" class="nav-list-link">反馈与建议</a></li><li class="nav-list-item"><a href="/Thanox/docs/privacy_statement" class="nav-list-link">隐私声明</a></li><li class="nav-list-item"><a href="/Thanox/docs/qa" class="nav-list-link">常见问题</a></li><li class="nav-list-item"><a href="/Thanox/docs/reference" class="nav-list-link">其他文章参考</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Thanox" aria-label="Search Thanox" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div align="right"> <p> <!-- jekyll-polyglot will process ferh= into href= through the static_href liquid block tag without relativizing the url; useful for making language navigation switchers --> <a href="/Thanox/en/docs/profile">English</a> | <a style="font-weight: bold;" href="/Thanox/docs/profile">简体中文</a> | </p> </div> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="情景模式"> <a href="#情景模式" class="anchor-heading" aria-labelledby="情景模式"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 情景模式 </h1> <h2 class="fs-6 fw-300 no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#01-前言" id="markdown-toc-01-前言">0.1. 前言</a></li> <li><a href="#02-介绍" id="markdown-toc-02-介绍">0.2. 介绍</a></li> <li><a href="#03-新建" id="markdown-toc-03-新建">0.3. 新建</a></li> <li><a href="#04-fatcs-params" id="markdown-toc-04-fatcs-params">0.4. Fatcs-params</a> <ol> <li><a href="#041-应用安装卸载更新" id="markdown-toc-041-应用安装卸载更新">0.4.1. 应用安装、卸载、更新</a></li> <li><a href="#042-应用切换" id="markdown-toc-042-应用切换">0.4.2. 应用切换</a></li> <li><a href="#043-任务清理" id="markdown-toc-043-任务清理">0.4.3. 任务清理</a></li> <li><a href="#044-activity-created" id="markdown-toc-044-activity-created">0.4.4. Activity Created</a></li> <li><a href="#045-activity-resumed" id="markdown-toc-045-activity-resumed">0.4.5. Activity Resumed</a></li> <li><a href="#046-activity-changed" id="markdown-toc-046-activity-changed">0.4.6. Activity Changed</a></li> <li><a href="#047-应用停止运行" id="markdown-toc-047-应用停止运行">0.4.7. 应用停止运行</a></li> <li><a href="#048-屏幕开关" id="markdown-toc-048-屏幕开关">0.4.8. 屏幕开关</a></li> <li><a href="#049-电量变化" id="markdown-toc-049-电量变化">0.4.9. 电量变化</a></li> <li><a href="#0410-蓝牙事件" id="markdown-toc-0410-蓝牙事件">0.4.10. 蓝牙事件</a></li> <li><a href="#0411-wifi状态变化" id="markdown-toc-0411-wifi状态变化">0.4.11. Wifi状态变化</a></li> <li><a href="#0412-系统启动" id="markdown-toc-0412-系统启动">0.4.12. 系统启动</a></li> <li><a href="#0413-推送消息" id="markdown-toc-0413-推送消息">0.4.13. 推送消息</a></li> <li><a href="#0414-通知" id="markdown-toc-0414-通知">0.4.14. 通知</a></li> <li><a href="#0515-快捷方式" id="markdown-toc-0515-快捷方式">0.5.15 快捷方式</a></li> </ol> </li> <li><a href="#05-handle" id="markdown-toc-05-handle">0.5. Handle</a> <ol> <li><a href="#051-killer" id="markdown-toc-051-killer">0.5.1. killer</a></li> <li><a href="#052-activity" id="markdown-toc-052-activity">0.5.2. activity</a></li> <li><a href="#053-power" id="markdown-toc-053-power">0.5.3. power</a></li> <li><a href="#054-task" id="markdown-toc-054-task">0.5.4. task</a></li> <li><a href="#055-ui" id="markdown-toc-055-ui">0.5.5. ui</a></li> <li><a href="#056-hw" id="markdown-toc-056-hw">0.5.6. hw</a></li> <li><a href="#057-io" id="markdown-toc-057-io">0.5.7. io</a></li> <li><a href="#058-data" id="markdown-toc-058-data">0.5.8. data</a></li> <li><a href="#059-ringtone" id="markdown-toc-059-ringtone">0.5.9. ringtone</a></li> <li><a href="#0510-sh" id="markdown-toc-0510-sh">0.5.10. sh</a></li> <li><a href="#0511-input" id="markdown-toc-0511-input">0.5.11. input</a></li> <li><a href="#0512-pkg" id="markdown-toc-0512-pkg">0.5.12. pkg</a></li> <li><a href="#0513-log" id="markdown-toc-0513-log">0.5.13. Log</a></li> <li><a href="#0514-audio" id="markdown-toc-0514-audio">0.5.14. Audio</a></li> <li><a href="#0515-battery" id="markdown-toc-0515-battery">0.5.15. Battery</a></li> <li><a href="#0516-context" id="markdown-toc-0516-context">0.5.16. Context</a></li> <li><a href="#0517-thanos" id="markdown-toc-0517-thanos">0.5.17. Thanos</a></li> <li><a href="#0518-actor废弃" id="markdown-toc-0518-actor废弃">0.5.18. Actor(废弃)</a></li> </ol> </li> <li><a href="#06-全局变量" id="markdown-toc-06-全局变量">0.6. 全局变量</a></li> </ol><hr /> <h2 id="01-前言"> <a href="#01-前言" class="anchor-heading" aria-labelledby="01-前言"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.1. 前言 </h2> <p>You can build a simple rules engine yourself. All you need is to create a bunch of objects with conditions and actions, store them in a collection, and run through them to evaluate the conditions and execute the actions. <a href="http://martinfowler.com/">Martin Fowler</a>  </p> <h2 id="02-介绍"> <a href="#02-介绍" class="anchor-heading" aria-labelledby="02-介绍"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.2. 介绍 </h2> <p>情景模式简单理解：</p> <p>“什么时候，干什么。”</p> <p>什么时候就是触发条件（condition）</p> <p>干什么就是动作（actions）</p> <p> </p> <p> </p> <h2 id="03-新建"> <a href="#03-新建" class="anchor-heading" aria-labelledby="03-新建"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.3. 新建 </h2> <p>新建一条入门实例如下，以JSON格式为例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Current pkg"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"应用切换时，使用Toast显示当前应用的当前应用包名"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"delay"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frontPkgChanged == true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showShortToast(activity.getFrontAppPackage());"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>参数解释：</p> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>含义</th> </tr> </thead> <tbody> <tr> <td>name</td> <td>请使用英文，情景模式名字，多个模式不能重复，否则会被覆盖</td> </tr> <tr> <td>description</td> <td>任意的描述</td> </tr> <tr> <td>priority</td> <td>优先级，决定执行顺序</td> </tr> <tr> <td>delay</td> <td>action 动作执行的延迟，时间单位为毫秒</td> </tr> <tr> <td>condition</td> <td>触发条件，支持mvel表达式，条件可选的基于事实的facts-param请参考下面的章节<br />语法注意：双引号需要使用\转移字符转义</td> </tr> <tr> <td>actions</td> <td>要执行的动作，支持<a href="http://mvel.documentnode.com">mvel表达式</a> ，可以设置多个，动作可选的handle请参考下面的章节<br />语法注意：双引号需要使用\转移字符转义</td> </tr> </tbody> </table></div> <p> </p> <p> </p> <h2 id="04-fatcs-params"> <a href="#04-fatcs-params" class="anchor-heading" aria-labelledby="04-fatcs-params"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4. Fatcs-params </h2> <p>除了提供规则引擎之外，Thanox也会提供常用的事实与参数，用于condition条件判断。</p> <p> </p> <h3 id="041-应用安装卸载更新"> <a href="#041-应用安装卸载更新" class="anchor-heading" aria-labelledby="041-应用安装卸载更新"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.1. 应用安装、卸载、更新 </h3> <p>应用安装、卸载、更新之后，thanox会发布这个事实，并注入一些参数，你可以使用这些参数做条件判断，或者执行动作时作为参数使用。</p> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>pkgAdded</td> <td>Boolean</td> <td>新应用已经安装</td> <td>如下</td> </tr> <tr> <td>pkgRemoved</td> <td>Boolean</td> <td>应用被卸载</td> <td>如下</td> </tr> <tr> <td>pkgUpdated</td> <td>Boolean</td> <td>应用已更新</td> <td>如下</td> </tr> <tr> <td>pkgName</td> <td>String</td> <td>安装的应用包名</td> <td>如下</td> </tr> </tbody> </table></div> <p><strong>pkgAdded</strong> 示例</p> <ul> <li> <p>作为条件判断：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"condition"</span><span class="p">:</span><span class="w">  </span><span class="s2">"pkgAdded == true"</span><span class="w">
</span></code></pre></div> </div> </li> </ul> <p><strong>pkgName</strong>示例</p> <ul> <li> <p>作为条件判断：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"condition"</span><span class="p">:</span><span class="w">  </span><span class="s2">"pkgAdded == true &amp;&amp; pkgName == </span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">"</span><span class="w">
</span></code></pre></div> </div> </li> <li> <p>作为动作参数：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"ui.showShortToast(pkgName);"</span><span class="w">
</span></code></pre></div> </div> <p> </p> </li> </ul> <h3 id="042-应用切换"> <a href="#042-应用切换" class="anchor-heading" aria-labelledby="042-应用切换"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.2. 应用切换 </h3> <p>前台应用切换时，thanox也会发布这个事实，参数如下。</p> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>frontPkgChanged</td> <td>Boolean（true/false）</td> <td>前台应用已切换</td> <td>如下</td> </tr> <tr> <td>from</td> <td>String（字符串）</td> <td>从哪个应用切换的，包名</td> <td>如下</td> </tr> <tr> <td>to</td> <td>String（字符串）</td> <td>切换到哪个应用，包名</td> <td>略</td> </tr> </tbody> </table></div> <p><strong>frontPkgChanged</strong>示例</p> <ul> <li> <p>作为条件判断：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"condition"</span><span class="p">:</span><span class="w">  </span><span class="s2">"frontPkgChanged == true"</span><span class="w">
</span></code></pre></div> </div> </li> </ul> <p><strong>from</strong>示例</p> <ul> <li> <p>作为条件判断，微信是否回到了后台：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"condition"</span><span class="p">:</span><span class="w">  </span><span class="s2">"frontPkgChanged == true &amp;&amp; from == </span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">"</span><span class="w">
</span></code></pre></div> </div> <p> </p> </li> </ul> <h3 id="043-任务清理"> <a href="#043-任务清理" class="anchor-heading" aria-labelledby="043-任务清理"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.3. 任务清理 </h3> <p>当某个应用的任务被移除时，一般场景为最近任务中，该任务被用户划掉。此时thanox也会发布这个事实，参数如下。</p> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>taskRemoved</td> <td>Boolean（true/false）</td> <td>任务已移除</td> <td>如下</td> </tr> <tr> <td>pkgName</td> <td>String（字符串）</td> <td>从哪个应用切换的，包名</td> <td>如下</td> </tr> </tbody> </table></div> <p><strong>taskRemoved</strong>示例</p> <ul> <li> <p>作为条件判断：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"condition"</span><span class="p">:</span><span class="w">  </span><span class="s2">"taskRemoved == true"</span><span class="w">
</span></code></pre></div> </div> </li> </ul> <p><strong>pkgName</strong>示例：</p> <ul> <li> <p>作为条件判断，微信任务移除时杀死应用：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"condition"</span><span class="p">:</span><span class="w">  </span><span class="s2">"taskRemoved == true &amp;&amp; pkgName == </span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">"</span><span class="err">，</span><span class="w">
</span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  		</span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">正在杀死微信</span><span class="se">\"</span><span class="s2">);"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"killer.killPackage(pkgName);"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span></code></pre></div> </div> </li> </ul> <p> </p> <h3 id="044-activity-created"> <a href="#044-activity-created" class="anchor-heading" aria-labelledby="044-activity-created"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.4. Activity Created </h3> <p>通常一个应用的活动页已经创建好，可以称为<strong>Activity Created</strong>。此时thanox也会发布这个事实，参数如下。 通常一个活动的生命周期为Created（创建好）–&gt;Resumed（显示好，可以交互了）–&gt; Paused（暂停）–&gt; Destroyed（销毁了），需要注意的是，</p> <p>如果一个活动走到Resumed状态时，被其他活动覆盖，例如被支付宝支付页面覆盖，那么它会走如下生命周期： Resumed–&gt; Paused（被其他活动覆盖）–&gt;Resumed（如果其他活动销毁了，回到了该活动，那么又会恢复到Resumed，而不会再次Create）。</p> <p>详细的Android活动的生命周期可以参考：https://developer.android.com/guide/components/activities/activity-lifecycle</p> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>activityCreated</td> <td>Boolean（true/false）</td> <td>活动页已经创建好</td> <td>如下</td> </tr> <tr> <td>componentNameAsString</td> <td>String（字符串）</td> <td>活动的组件全名，Thanox的显示当前活动复制来的名字就是这个</td> <td>如下</td> </tr> <tr> <td>componentNameAsShortString</td> <td>String（字符串）</td> <td>活动的组件缩名</td> <td>如下</td> </tr> <tr> <td>componentName</td> <td>ComponentName</td> <td>活动的组件</td> <td>如下</td> </tr> <tr> <td>pkgName</td> <td>String（字符串）</td> <td>应用的包名</td> <td>如下</td> </tr> </tbody> </table></div> <p> </p> <h3 id="045-activity-resumed"> <a href="#045-activity-resumed" class="anchor-heading" aria-labelledby="045-activity-resumed"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.5. Activity Resumed </h3> <p>通常一个应用的活动页已经显示，可以称为<strong>Activity Resumed</strong>。此时thanox也会发布这个事实，参数如下。</p> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>activityResumed</td> <td>Boolean（true/false）</td> <td>活动已经显示</td> <td>如下</td> </tr> <tr> <td>componentNameAsString</td> <td>String（字符串）</td> <td>活动的组件全名，Thanox的显示当前活动复制来的名字就是这个</td> <td>如下</td> </tr> <tr> <td>componentNameAsShortString</td> <td>String（字符串）</td> <td>活动的组件缩名</td> <td>如下</td> </tr> <tr> <td>componentName</td> <td>ComponentName</td> <td>活动的组件</td> <td>如下</td> </tr> <tr> <td>pkgName</td> <td>String（字符串）</td> <td>应用的包名</td> <td>如下</td> </tr> </tbody> </table></div> <p>通常很多应用启动首页会有一个首页显示广告，有个跳过按钮可以点击，下面是使用该事实实现的广告跳过示例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AD Skip"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"彩云天气广告页面点击跳过"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"activityResumed == true &amp;&amp; componentNameAsShortString == </span><span class="se">\"</span><span class="s2">com.nowcasting.activity/.SplashActivity</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">尝试点击跳过...</span><span class="se">\"</span><span class="s2">);"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ui.findAndClickViewByText(</span><span class="se">\"</span><span class="s2">跳过</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">com.nowcasting.activity/com.nowcasting.activity.SplashActivity</span><span class="se">\"</span><span class="s2">);"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <div class="table-wrapper"><table> <tbody> <tr> <td>提示：此处条件只判断了彩云天气，可以使用</td> <td> </td> <td>操作符做多条件判断。此处的ui操作后续会介绍。</td> </tr> </tbody> </table></div> <p> </p> <h3 id="046-activity-changed"> <a href="#046-activity-changed" class="anchor-heading" aria-labelledby="046-activity-changed"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.6. Activity Changed </h3> <p>当前前台活动(Activity)发生改变时thanox会发布该事件。(Since Thanox(or Pro)-2.5)</p> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>frontActivityChanged</td> <td>Boolean（true/false）</td> <td>前台Activity改变</td> <td>无</td> </tr> <tr> <td>fromActivity</td> <td>ComponentName</td> <td>活动的组件</td> <td>无</td> </tr> <tr> <td>toActivity</td> <td>ComponentName</td> <td>活动的组件</td> <td>无</td> </tr> </tbody> </table></div> <p><a href="https://developer.android.com/reference/android/content/ComponentName">ComponentName</a> 是活动组件名称。</p> <p>例如：<code class="language-plaintext highlighter-rouge">com.android.messaging/com.android.messaging.ui.conversationlist.ConversationListActivity</code></p> <p>Thanox的开发者设置中，”显示当前Activity”功能也可以显示当前activity的ComponentName。</p> <p> </p> <h3 id="047-应用停止运行"> <a href="#047-应用停止运行" class="anchor-heading" aria-labelledby="047-应用停止运行"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.7. 应用停止运行 </h3> <p>应用被杀死或者其他原因停止运行，Thanox会发布该事实。</p> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>pkgKilled</td> <td>Boolean（true/false）</td> <td>任务已移除</td> <td>如下</td> </tr> <tr> <td>pkgName</td> <td>String（字符串）</td> <td>应用包名</td> <td>如下</td> </tr> </tbody> </table></div> <p> </p> <h3 id="048-屏幕开关"> <a href="#048-屏幕开关" class="anchor-heading" aria-labelledby="048-屏幕开关"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.8. 屏幕开关 </h3> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>screenOn</td> <td>Boolean（true/false）</td> <td>亮屏事件</td> <td>无</td> </tr> <tr> <td>screenOff</td> <td>Boolean（true/false）</td> <td>灭屏事件</td> <td>无</td> </tr> <tr> <td>userPresent</td> <td>Boolean（true/false）</td> <td>解锁事件</td> <td>无</td> </tr> </tbody> </table></div> <p> </p> <h3 id="049-电量变化"> <a href="#049-电量变化" class="anchor-heading" aria-labelledby="049-电量变化"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.9. 电量变化 </h3> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>batteryChanged</td> <td>Boolean（true/false）</td> <td>电量发生变化</td> <td>无</td> </tr> <tr> <td>batteryLevel</td> <td>int</td> <td>电量</td> <td>无</td> </tr> <tr> <td>isCharging</td> <td>Boolean（true/false）</td> <td>是否在充电</td> <td>无</td> </tr> <tr> <td>isAcCharge</td> <td>Boolean（true/false）</td> <td>是否为AC</td> <td>无</td> </tr> <tr> <td>isUsbCharge</td> <td>Boolean（true/false）</td> <td>是否为USB</td> <td>无</td> </tr> </tbody> </table></div> <p> </p> <h3 id="0410-蓝牙事件"> <a href="#0410-蓝牙事件" class="anchor-heading" aria-labelledby="0410-蓝牙事件"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.10. 蓝牙事件 </h3> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>btStateChanged</td> <td>Boolean（true/false）</td> <td>蓝牙开关状态发生变化</td> <td>无</td> </tr> <tr> <td>btStateOff</td> <td>Boolean（true/false）</td> <td>蓝牙为关闭状态</td> <td>无</td> </tr> <tr> <td>btStateTurningOff</td> <td>Boolean（true/false）</td> <td>蓝牙为正在关闭状态</td> <td>无</td> </tr> <tr> <td>btStateOn</td> <td>Boolean（true/false）</td> <td>蓝牙为开启状态</td> <td>无</td> </tr> <tr> <td>btStateTurningOn</td> <td>Boolean（true/false）</td> <td>蓝牙为正在开启状态</td> <td>无</td> </tr> <tr> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>btConnectionStateChanged</td> <td>Boolean（true/false）</td> <td>蓝牙连接状态发生变化</td> <td>无</td> </tr> <tr> <td>btConnectionStateConnected</td> <td>Boolean（true/false）</td> <td>蓝牙为已连接状态</td> <td>无</td> </tr> <tr> <td>btConnectionStateConnecting</td> <td>Boolean（true/false）</td> <td>蓝牙为正在连接状态</td> <td>无</td> </tr> <tr> <td>btConnectionStateDisconnected</td> <td>Boolean（true/false）</td> <td>蓝牙为断开连接状态</td> <td>无</td> </tr> <tr> <td>btConnectionStateDisconnecting</td> <td>Boolean（true/false）</td> <td>蓝牙为正在断开连接状态</td> <td>无</td> </tr> <tr> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>btBoundedDevices</td> <td>List of BluetoothDevice</td> <td>绑定的蓝牙设备模型列表</td> <td>无</td> </tr> <tr> <td>btBoundedDeviceAddresses</td> <td>List of String</td> <td>绑定的蓝牙设备地址列表</td> <td>无</td> </tr> <tr> <td>btBoundedDeviceAliasNames</td> <td>List of String</td> <td>绑定的蓝牙设备Alias列表</td> <td>无</td> </tr> <tr> <td>btBoundedDeviceBatteryLevel</td> <td>List of Int</td> <td>绑定的蓝牙设备电量信息列表</td> <td>无</td> </tr> </tbody> </table></div> <p>提示： Battery level in percents from 0 to 100, or -1 if Bluetooth is disabled, or device is disconnected, or does not have any battery reportingservice, or return value is invalid</p> <p>示例1：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BT Connection State"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"蓝牙连接状态监听，此处监听连接事件，Toast显示所有连接设备，并判断是不是连接的MDR-XB650BT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btConnectionStateChanged == true &amp;&amp; btConnectionStateConnected == true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">蓝牙连接连接到新设备了，所有设备名称为：</span><span class="se">\"</span><span class="s2"> + btBoundedDeviceAliasNames);"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">蓝牙连接连接到新设备了，包含MDR-XB650BT设备吗？</span><span class="se">\"</span><span class="s2"> + btBoundedDeviceAliasNames.contains(</span><span class="se">\"</span><span class="s2">MDR-XB650BT</span><span class="se">\"</span><span class="s2">));"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>示例2：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BT Connection State Advanced"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"同蓝牙连接状态监听，只是使用了btBoundedDevices:BluetoothDevice参数"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btConnectionStateChanged == true &amp;&amp; btConnectionStateConnected == true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">蓝牙连接连接到新设备了，第一个设备名称为：</span><span class="se">\"</span><span class="s2"> + btBoundedDevices.get(0).getAddress());"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="0411-wifi状态变化"> <a href="#0411-wifi状态变化" class="anchor-heading" aria-labelledby="0411-wifi状态变化"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.11. Wifi状态变化 </h3> <p>Wifi状态变化时发出的事件。（Since Thanox 2.5-2）</p> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>wifiStateChanged</td> <td>Boolean（true/false）</td> <td>Wifi状态是否改变</td> <td>无</td> </tr> <tr> <td>wifiState</td> <td>WifiState</td> <td>状态</td> <td>无</td> </tr> </tbody> </table></div> <p>WifiState:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="kd">class</span> <span class="nf">WifiState</span><span class="o">(</span>
  <span class="c1">// 是否是开启状态</span>
  <span class="n">val</span> <span class="nl">enabled:</span> <span class="nc">Boolean</span><span class="o">,</span> 
  <span class="c1">// 状态信息（例如：No network）</span>
  <span class="n">val</span> <span class="nl">statusLabel:</span> <span class="nc">String</span><span class="o">?,</span> 
  <span class="c1">// SSID（例如：ChinaNet-d2Xq-5G）</span>
  <span class="n">val</span> <span class="nl">ssid:</span> <span class="nc">String</span><span class="o">?</span>
<span class="o">)</span>
</code></pre></div></div> <p> </p> <h3 id="0412-系统启动"> <a href="#0412-系统启动" class="anchor-heading" aria-labelledby="0412-系统启动"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.12. 系统启动 </h3> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>systemReady</td> <td>Boolean（true/false）</td> <td>系统启动完成</td> <td>无</td> </tr> </tbody> </table></div> <p> </p> <h3 id="0413-推送消息"> <a href="#0413-推送消息" class="anchor-heading" aria-labelledby="0413-推送消息"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.13. 推送消息 </h3> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>fcmPushMessageArrived</td> <td>Boolean（true/false）</td> <td>收到GCM/FCM消息推送</td> <td>无</td> </tr> <tr> <td>pkgName</td> <td>String（字符串）</td> <td>应用包名</td> <td>无</td> </tr> </tbody> </table></div> <p> </p> <h3 id="0414-通知"> <a href="#0414-通知" class="anchor-heading" aria-labelledby="0414-通知"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.4.14. 通知 </h3> <div class="table-wrapper"><table> <thead> <tr> <th>参数名</th> <th>类型</th> <th>含义</th> <th>示例</th> </tr> </thead> <tbody> <tr> <td>notificationAdded</td> <td>Boolean（true/false）</td> <td>新通知到达</td> <td>无</td> </tr> <tr> <td>notificationUpdated</td> <td>Boolean（true/false）</td> <td>通知更新</td> <td>无</td> </tr> <tr> <td>notificationRemoved</td> <td>Boolean（true/false）</td> <td>通知移除</td> <td>无</td> </tr> <tr> <td>pkgName</td> <td>String（字符串）</td> <td>通知所属应用包名</td> <td>无</td> </tr> <tr> <td>userId</td> <td>Int</td> <td>通知app的用户id</td> <td>无</td> </tr> <tr> <td>notificationTitle</td> <td>String（字符串）</td> <td>通知标题</td> <td>无</td> </tr> <tr> <td>notificationContent</td> <td>String（字符串）</td> <td>通知内容</td> <td>无</td> </tr> <tr> <td>notification</td> <td>NotificationRecord</td> <td>通知记录，该模型包含更详细的信息，<a href="https://github.com/Tornaco/Thanox/blob/master/android/android_framework/base/src/main/java/github/tornaco/android/thanos/core/n/NotificationRecord.java">查看模型定义</a></td> <td>无</td> </tr> </tbody> </table></div> <p>示例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notification events"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"通知事件"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notificationAdded || notificationRemoved || notificationUpdated"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">通知事件 </span><span class="se">\"</span><span class="s2"> + pkgName + notificationContent);"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="0515-快捷方式"> <a href="#0515-快捷方式" class="anchor-heading" aria-labelledby="0515-快捷方式"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.15 快捷方式 </h3> <p>你可以创建一个有”意义的“桌面快捷方式，当你点击这个桌面快捷方式的时候，Thanox会发布这个快捷方式代表的事实。</p> <p>例如；实现一个一键锁屏快捷方式，即：点击桌面一键锁屏快捷方式时锁屏。</p> <p> </p> <p>首先创建一个快捷方式引擎：</p> <p> </p> <p><img src="../assets/images/prlfile-shortcut-create.png" alt="prlfile-shortcut-create" /> </p> <p> </p> <p>接下来，添加一个情景模式，监听这个快捷方式的启动事件，并指定锁屏命令：</p> <p> </p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Profile shortcut"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"监听一个快捷方式启动事件，以一键锁屏为例"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shortcutLaunched == true &amp;&amp; shortcutValue == </span><span class="se">\"</span><span class="s2">turn screen off</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"power.sleep(0);"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <p>保存之后，点击桌面上的一键锁屏快捷方式即可实现一键锁屏功能了。</p> <p> </p> <p> </p> <h2 id="05-handle"> <a href="#05-handle" class="anchor-heading" aria-labelledby="05-handle"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5. Handle </h2> <p>Thanox会提供一部分执行动作所需要的handle能力。例如ui，专门用于做界面显示相关的动作。</p> <p>你可以使用<code class="language-plaintext highlighter-rouge">handle.action(params)</code>来执行自定义的动作。</p> <p>下面是目前支持的Handle能力。</p> <p> </p> <h3 id="051-killer"> <a href="#051-killer" class="anchor-heading" aria-labelledby="051-killer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.1. killer </h3> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>killPackage</td> <td>杀死应用</td> <td>包名</td> <td>killer.killPackage(“com.tencent.mm”)</td> <td>Boolean（true/false）</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"killer"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IKiller</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">killPackage</span><span class="o">(</span><span class="nc">String</span> <span class="n">pkgName</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p>举例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">杀死微信</span><span class="w">
  </span><span class="s2">"killer.killPackage(</span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">)"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="052-activity"> <a href="#052-activity" class="anchor-heading" aria-labelledby="052-activity"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.2. activity </h3> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>launchProcessForPackage</td> <td>启动应用进程</td> <td>包名</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>launchMainActivityForPackage</td> <td>打开应用主界面</td> <td>包名</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>getLaunchIntentForPackage</td> <td>获取应用的启动Intent</td> <td>包名</td> <td>如下</td> <td>Intent</td> </tr> <tr> <td>getFrontAppPackage</td> <td>获取当前前台应用包名</td> <td>无</td> <td>如下</td> <td>String（字符串）</td> </tr> <tr> <td>getFrontAppPackageComponent</td> <td>获取当前前台应用组件</td> <td>无</td> <td>如下</td> <td>ComponentName</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"activity"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IActivity</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">launchProcessForPackage</span><span class="o">(</span><span class="nc">String</span> <span class="n">pkgName</span><span class="o">);</span>

    <span class="kt">boolean</span> <span class="nf">launchActivity</span><span class="o">(</span><span class="nc">Intent</span> <span class="n">intent</span><span class="o">);</span>

    <span class="kt">boolean</span> <span class="nf">launchMainActivityForPackage</span><span class="o">(</span><span class="nc">String</span> <span class="n">pkgName</span><span class="o">);</span>

    <span class="nc">Intent</span> <span class="nf">getLaunchIntentForPackage</span><span class="o">(</span><span class="nc">String</span> <span class="n">pkgName</span><span class="o">);</span>

    <span class="nc">String</span> <span class="nf">getFrontAppPackage</span><span class="o">();</span>

    <span class="nc">ComponentName</span> <span class="nf">getFrontAppPackageComponent</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div> <p>举例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">启动微信进程</span><span class="w">
  </span><span class="s2">"activity.launchProcessForPackage(</span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">)"</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">打开微信主界面</span><span class="w">
  </span><span class="s2">"activity.launchMainActivityForPackage(</span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">)"</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">吐司显示目前前台应用包名</span><span class="w">
  </span><span class="s2">"toast.showShortToast(activity.getFrontAppPackage())"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="053-power"> <a href="#053-power" class="anchor-heading" aria-labelledby="053-power"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.3. power </h3> <p>电源相关能力</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>sleep</td> <td>休眠（锁屏）</td> <td>延迟的毫秒数</td> <td>如下</td> <td>无</td> </tr> <tr> <td>wakeup</td> <td>唤醒</td> <td>延迟的毫秒数</td> <td>如下</td> <td>无</td> </tr> <tr> <td>setBrightness</td> <td>设置屏幕亮度</td> <td>亮度Level值(0~255)</td> <td>如下</td> <td>无</td> </tr> <tr> <td>getBrightness</td> <td>获取当前屏幕亮度</td> <td>无</td> <td>如下</td> <td>度Level值(0~255)</td> </tr> <tr> <td>setAutoBrightnessEnabled</td> <td>设置自动亮度开关</td> <td>true/false</td> <td>如下</td> <td>无</td> </tr> <tr> <td>isAutoBrightnessEnabled</td> <td>是否开启自动亮度</td> <td>无</td> <td>如下</td> <td>true/false</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"power"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IPower</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">sleep</span><span class="o">(</span><span class="kt">long</span> <span class="n">delay</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">wakeup</span><span class="o">(</span><span class="kt">long</span> <span class="n">delay</span><span class="o">);</span>
  
    <span class="kt">void</span> <span class="nf">setBrightness</span><span class="o">(</span><span class="kt">int</span> <span class="n">level</span><span class="o">);</span>

    <span class="kt">int</span> <span class="nf">getBrightness</span><span class="o">();</span>

    <span class="kt">void</span> <span class="nf">setAutoBrightnessEnabled</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">enable</span><span class="o">);</span>

    <span class="kt">boolean</span> <span class="nf">isAutoBrightnessEnabled</span><span class="o">();</span>
<span class="o">}</span>

</code></pre></div></div> <p>举例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="err">//</span><span class="w"> </span><span class="err">立即锁屏</span><span class="w">
        </span><span class="s2">"power.sleep(0)"</span><span class="p">,</span><span class="w">
        </span><span class="err">//</span><span class="w"> </span><span class="mi">1</span><span class="err">秒后亮屏</span><span class="w">
        </span><span class="s2">"power.wakeup(1000)"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"power.setAutoBrightnessEnabled(false)"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"power.setBrightness(power.getBrightness() + 1)"</span><span class="p">,</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="054-task"> <a href="#054-task" class="anchor-heading" aria-labelledby="054-task"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.4. task </h3> <p>任务相关能力</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>removeTasksForPackage</td> <td>移除应用的最近任务</td> <td>包名</td> <td>如下</td> <td>无</td> </tr> <tr> <td>hasTaskFromPackage</td> <td>应用是否有最近任务</td> <td>包名</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>clearBackgroundTasks</td> <td>调用thanox的任务清理功能，清理所有最近任务</td> <td>无</td> <td>如下</td> <td>无</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"task"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">ITask</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">removeTasksForPackage</span><span class="o">(</span><span class="nc">String</span> <span class="n">pkgName</span><span class="o">);</span>

    <span class="kt">boolean</span> <span class="nf">hasTaskFromPackage</span><span class="o">(</span><span class="nc">String</span> <span class="n">pkgName</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">clearBackgroundTasks</span><span class="o">();</span>
<span class="o">}</span>

</code></pre></div></div> <p>举例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  	</span><span class="err">//</span><span class="w"> </span><span class="err">判断微信是否有任务</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true &amp;&amp; task.hasTaskFromPackage(</span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">)"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="err">//</span><span class="w"> </span><span class="err">移除微信的最近任务</span><span class="w">
        </span><span class="s2">"task.removeTasksForPackage(</span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">)"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="055-ui"> <a href="#055-ui" class="anchor-heading" aria-labelledby="055-ui"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.5. ui </h3> <p>界面相关</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>showShortToast</td> <td>显示提示</td> <td>无</td> <td>如下</td> <td>无</td> </tr> <tr> <td>showLongToast</td> <td>显示时间较短的提示</td> <td>无</td> <td>如下</td> <td>无</td> </tr> <tr> <td>showDialog</td> <td>显示对话框</td> <td>标题文本，信息文本，确认按钮文本</td> <td>如下</td> <td>无</td> </tr> <tr> <td>showNotification</td> <td>显示通知</td> <td>标签（可用于取消通知）标题文本，信息文本，是否重要</td> <td>如下</td> <td>无</td> </tr> <tr> <td>cancelNotification</td> <td>取消通知</td> <td>标签</td> <td>如下</td> <td>无</td> </tr> <tr> <td>showDanmu</td> <td>显示一条弹幕 [since Thanox4.0.9]</td> <td>弹幕文本</td> <td>如下</td> <td>无</td> </tr> <tr> <td>showDanmu</td> <td>显示一条带图标的弹幕 [since Thanox4.0.9]</td> <td>图标，弹幕文本</td> <td>如下</td> <td>无</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"ui"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IUI</span> <span class="o">{</span>

    <span class="kt">void</span> <span class="nf">showShortToast</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">msg</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">showLongToast</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">msg</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">showDialog</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="nc">String</span> <span class="n">title</span><span class="o">,</span>
                    <span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">msg</span><span class="o">,</span>
                    <span class="nd">@Nullable</span> <span class="nc">String</span> <span class="n">yes</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">showNotification</span><span class="o">(</span>
            <span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">notificationTag</span><span class="o">,</span>
            <span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">title</span><span class="o">,</span>
            <span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">msg</span><span class="o">,</span>
            <span class="kt">boolean</span> <span class="n">important</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">cancelNotification</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">String</span> <span class="n">notificationTag</span><span class="o">);</span>
    
    <span class="kt">void</span> <span class="nf">showDanmu</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">Object</span> <span class="n">msg</span><span class="o">);</span>

    <span class="cm">/**
     * Show a danmu on your screen.
     *
     * @param icon Icon for danmu, supported format:
     *             app icon: app://app.package.name
     * @param msg  The text to show
     */</span>
    <span class="kt">void</span> <span class="nf">showDanmu</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="nc">String</span> <span class="n">icon</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="nc">Object</span> <span class="n">msg</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p>使用弹幕API的例子：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"弹幕通知 Danmu notification"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"收到通知时用弹幕展示 Show Danmu on notification posted"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notificationAdded &amp;&amp; !notification.isForegroundService &amp;&amp; pkgName != </span><span class="se">\"</span><span class="s2">android</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showDanmu(</span><span class="se">\"</span><span class="s2">app://</span><span class="se">\"</span><span class="s2"> + pkgName, thanos.pkgManager.getAppInfo(pkgName).appLabel + </span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2"> + notificationTitle + </span><span class="se">\"\n\"</span><span class="s2"> + notificationContent);"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="056-hw"> <a href="#056-hw" class="anchor-heading" aria-labelledby="056-hw"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.6. hw </h3> <p>硬件操作能力</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>enableWifi</td> <td>看名字</td> <td>包名</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>disableWifi</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>isWifiEnabled</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>enableLocation</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>disableLocation</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>isLocationEnabled</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>enableBT</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>disableBT</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>isBTEnabled</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>enableNfc</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>disableNfc</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>isNfcEnabled</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>enabledFlashlight</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>disableFlashlight</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>isFlashlightEnabled</td> <td>看名字</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>isFlashlightAvailable</td> <td>手电筒是否可用（被占用？无硬件？）</td> <td>无</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"hw"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IHW</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">enableWifi</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">disableWifi</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">isWifiEnabled</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">enableLocation</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">disableLocation</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">isLocationEnabled</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">enableBT</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">disableBT</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">isBTEnabled</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">enableNfc</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">disableNfc</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">isNfcEnabled</span><span class="o">();</span>
  
    <span class="kt">boolean</span> <span class="nf">enabledFlashlight</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">disableFlashlight</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">isFlashlightEnabled</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">isFlashlightAvailable</span><span class="o">();</span>
<span class="o">}</span>

</code></pre></div></div> <p>举例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable BT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"打开微信时，打开蓝牙"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frontPkgChanged == true &amp;&amp; to == </span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">蓝牙状态</span><span class="se">\"</span><span class="s2"> + (hw.isBTEnabled() ? </span><span class="se">\"</span><span class="s2">开启</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">关闭</span><span class="se">\"</span><span class="s2">));"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">正在打开蓝牙...</span><span class="se">\"</span><span class="s2">);"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">蓝牙打开</span><span class="se">\"</span><span class="s2"> + (hw.enableBT() ? </span><span class="se">\"</span><span class="s2">成功</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">失败</span><span class="se">\"</span><span class="s2">));"</span><span class="p">,</span><span class="w">
      </span><span class="err">//</span><span class="w"> </span><span class="err">打开GPS</span><span class="w">
      </span><span class="s2">"hw.enableLocation()"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"hw.enableWifi()"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="057-io"> <a href="#057-io" class="anchor-heading" aria-labelledby="057-io"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.7. io </h3> <p>文件读写能力。</p> <p>注意：受限于文件权限，所有文件的根目录为/data/system/thanos_xxx/profile_user_io</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>read</td> <td>读取文件</td> <td>文件相对路径</td> <td>略</td> <td>String</td> </tr> <tr> <td>write</td> <td>写内容到文件</td> <td>文件相对路径</td> <td>略</td> <td>Boolean</td> </tr> <tr> <td>writeAppend</td> <td>写内容到文件，追加</td> <td>文件相对路径</td> <td>略</td> <td>Boolean</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"io"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IIO</span> <span class="o">{</span>

    <span class="nc">String</span> <span class="nf">read</span><span class="o">(</span><span class="nc">String</span> <span class="n">path</span><span class="o">);</span>

    <span class="kt">boolean</span> <span class="nf">write</span><span class="o">(</span><span class="nc">String</span> <span class="n">path</span><span class="o">,</span> <span class="nc">String</span> <span class="n">content</span><span class="o">);</span>

    <span class="kt">boolean</span> <span class="nf">writeAppend</span><span class="o">(</span><span class="nc">String</span> <span class="n">path</span><span class="o">,</span> <span class="nc">String</span> <span class="n">content</span><span class="o">);</span>
<span class="o">}</span>

</code></pre></div></div> <p> </p> <h3 id="058-data"> <a href="#058-data" class="anchor-heading" aria-labelledby="058-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.8. data </h3> <p>移动数据相关能力。</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>setDataEnabled</td> <td>设置移动数据开启状态</td> <td>true打开，false关闭</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>setDataEnabled</td> <td>设置移动数据开启状态（可以指定卡序号）</td> <td>卡序号，true打开，false关闭</td> <td>如下</td> <td>无</td> </tr> <tr> <td>setDataEnabledForSlot</td> <td>设置移动数据开启状态（可以指定卡槽号）</td> <td>卡序号，true打开，false关闭</td> <td>如下</td> <td>无</td> </tr> <tr> <td>isDataEnabled</td> <td>获取移动数据开启状态</td> <td>true打开，false关闭</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>isDataEnabledForSlot</td> <td>获取移动数据开启状态（可以指定卡槽号）</td> <td>true打开，false关闭</td> <td>如下</td> <td>Boolean（true/false）</td> </tr> <tr> <td>setDataNetworkType</td> <td>设置网络模式</td> <td>type</td> <td>如下</td> <td>无</td> </tr> <tr> <td>setDataNetworkTypeForPhone</td> <td>设置网络模式（指定某个卡）</td> <td>phoneId，type</td> <td>如下</td> <td>无</td> </tr> <tr> <td>setDataNetworkTypeForSlot</td> <td>设置网络模式（指定某个卡槽号）</td> <td>slotId，type</td> <td>如下</td> <td>无</td> </tr> <tr> <td>getCurrentPreferredNetworkMode</td> <td>获取当前默认卡的网络模式</td> <td>无</td> <td>如下</td> <td>int</td> </tr> <tr> <td>getCurrentPreferredNetworkMode</td> <td>获取某subId的网络模式</td> <td>subId</td> <td>如下</td> <td>int</td> </tr> <tr> <td>getCurrentPreferredNetworkModeForSlot</td> <td>获取某卡槽的网络模式</td> <td>slotId</td> <td>如下</td> <td>int</td> </tr> <tr> <td>isAirplaneModeEnabled</td> <td>是否开启了飞行模式</td> <td>无</td> <td>无</td> <td>Boolean</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"data"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IData</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">setDataEnabled</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">enable</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">setDataEnabled</span><span class="o">(</span><span class="kt">int</span> <span class="n">subId</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">enable</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">setDataEnabledForSlot</span><span class="o">(</span><span class="kt">int</span> <span class="n">slotId</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">enable</span><span class="o">);</span>

    <span class="kt">boolean</span> <span class="nf">isDataEnabled</span><span class="o">();</span>

    <span class="kt">boolean</span> <span class="nf">isDataEnabledForSlot</span><span class="o">(</span><span class="kt">int</span> <span class="n">slotId</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">setDataNetworkType</span><span class="o">(</span><span class="kt">int</span> <span class="n">type</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">setDataNetworkTypeForPhone</span><span class="o">(</span><span class="kt">int</span> <span class="n">phoneId</span><span class="o">,</span> <span class="kt">int</span> <span class="n">type</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">setDataNetworkTypeForSlot</span><span class="o">(</span><span class="kt">int</span> <span class="n">slotId</span><span class="o">,</span> <span class="kt">int</span> <span class="n">type</span><span class="o">);</span>

    <span class="kt">int</span> <span class="nf">getCurrentPreferredNetworkMode</span><span class="o">();</span>

    <span class="kt">int</span> <span class="nf">getCurrentPreferredNetworkMode</span><span class="o">(</span><span class="kt">int</span> <span class="n">subId</span><span class="o">);</span>

    <span class="kt">int</span> <span class="nf">getCurrentPreferredNetworkModeForSlot</span><span class="o">(</span><span class="kt">int</span> <span class="n">slotId</span><span class="o">);</span>
<span class="o">}</span>

</code></pre></div></div> <p>数据网络模式类型：</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Network type enums, primarily used by android/telephony/TelephonyManager.java.</span>
<span class="c1">// Do not add negative types.</span>
<span class="k">enum</span> <span class="n">NetworkTypeEnum</span> <span class="p">{</span>
    <span class="n">NETWORK_TYPE_UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_GPRS</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_EDGE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_UMTS</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_CDMA</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_EVDO_0</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_EVDO_A</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_1XRTT</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_HSDPA</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_HSUPA</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_HSPA</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_IDEN</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_EVDO_B</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_LTE</span> <span class="o">=</span> <span class="mi">13</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_EHRPD</span> <span class="o">=</span> <span class="mi">14</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_HSPAP</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_GSM</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_TD_SCDMA</span> <span class="o">=</span> <span class="mi">17</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_IWLAN</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_LTE_CA</span> <span class="o">=</span> <span class="mi">19</span><span class="p">;</span>
    <span class="n">NETWORK_TYPE_NR</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>举例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable Data"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"打开微信时，打开移动数据"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frontPkgChanged == true &amp;&amp; to == </span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">移动数据当前</span><span class="se">\"</span><span class="s2"> + (data.isDataEnabled() ? </span><span class="se">\"</span><span class="s2">开启</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">关闭</span><span class="se">\"</span><span class="s2">));"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">正在打开移动数据...</span><span class="se">\"</span><span class="s2">);"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"data.setDataEnabled(true)"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="059-ringtone"> <a href="#059-ringtone" class="anchor-heading" aria-labelledby="059-ringtone"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.9. ringtone </h3> <p>铃音振动能力。</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>dingdingding</td> <td>看名字</td> <td>无或者重复次数</td> <td>如下</td> <td>无</td> </tr> <tr> <td>wengwengweng</td> <td>看名字</td> <td>无或者重复次数</td> <td>如下</td> <td>无</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"ringtone"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IRingtone</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">dingdingding</span><span class="o">();</span>

    <span class="kt">void</span> <span class="nf">wengwengweng</span><span class="o">();</span>

    <span class="kt">void</span> <span class="nf">dingdingding</span><span class="o">(</span><span class="kt">int</span> <span class="n">repeat</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">wengwengweng</span><span class="o">(</span><span class="kt">int</span> <span class="n">repeat</span><span class="o">);</span>
<span class="o">}</span>

</code></pre></div></div> <p> </p> <h3 id="0510-sh"> <a href="#0510-sh" class="anchor-heading" aria-labelledby="0510-sh"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.10. sh </h3> <p>Shell sh能力。</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>exe</td> <td>执行sh命令</td> <td>命令字符串</td> <td>无</td> <td>结果</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"sh"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">ISh</span> <span class="o">{</span>
    <span class="nc">CommandResult</span> <span class="nf">exe</span><span class="o">(</span><span class="nc">String</span> <span class="n">command</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p> </p> <h3 id="0511-input"> <a href="#0511-input" class="anchor-heading" aria-labelledby="0511-input"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.11. input </h3> <p>按键输入能力。</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>injectKey</td> <td>执行sh命令</td> <td>命令字符串</td> <td>无</td> <td>结果</td> </tr> <tr> <td>getLastKey</td> <td>返回上次按键码</td> <td>无</td> <td>无</td> <td>按键码</td> </tr> <tr> <td>getLastKeyTime</td> <td>返回上次按键的系统时间</td> <td>无</td> <td>无</td> <td>系统时间mills</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"input"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IInput</span> <span class="o">{</span>

    <span class="kt">boolean</span> <span class="nf">injectKey</span><span class="o">(</span><span class="kt">int</span> <span class="n">code</span><span class="o">);</span>

    <span class="kt">int</span> <span class="nf">getLastKey</span><span class="o">();</span>

    <span class="kt">long</span> <span class="nf">getLastKeyTime</span><span class="o">();</span>
<span class="o">}</span>

</code></pre></div></div> <p> </p> <h3 id="0512-pkg"> <a href="#0512-pkg" class="anchor-heading" aria-labelledby="0512-pkg"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.12. pkg </h3> <p>包管理能力。</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>disableApplication</td> <td>冻结应用</td> <td>包名</td> <td>无</td> <td>无</td> </tr> <tr> <td>enableApplication</td> <td>解冻应用</td> <td>包名</td> <td>无</td> <td>无</td> </tr> <tr> <td>isApplicationEnabled</td> <td>应用是否为非冻结状态</td> <td>包名</td> <td>无</td> <td>Boolean(true/false)</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"pkg"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IPkg</span> <span class="o">{</span>

    <span class="kt">void</span> <span class="nf">disableApplication</span><span class="o">(</span><span class="nc">String</span> <span class="n">pkg</span><span class="o">);</span>

    <span class="kt">void</span> <span class="nf">enableApplication</span><span class="o">(</span><span class="nc">String</span> <span class="n">pkg</span><span class="o">);</span>

    <span class="kt">boolean</span> <span class="nf">isApplicationEnabled</span><span class="o">(</span><span class="nc">String</span> <span class="n">pkg</span><span class="o">);</span>
<span class="o">}</span>


</code></pre></div></div> <p> </p> <h3 id="0513-log"> <a href="#0513-log" class="anchor-heading" aria-labelledby="0513-log"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.13. Log </h3> <p>日志打印工具。</p> <p>使用示例:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">log</span><span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">"Log message"</span><span class="o">);</span>
</code></pre></div></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"log"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ILog</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">log</span><span class="o">(</span><span class="nc">String</span> <span class="n">content</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p> </p> <h3 id="0514-audio"> <a href="#0514-audio" class="anchor-heading" aria-labelledby="0514-audio"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.14. Audio </h3> <p>声音管理相关。</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>getRingerMode</td> <td>获取铃音模式</td> <td>无</td> <td>无</td> <td>模式的int值</td> </tr> <tr> <td>setRingerMode</td> <td>设置铃音模式</td> <td>模式的int值</td> <td>无</td> <td>无</td> </tr> </tbody> </table></div> <blockquote> <p>铃音模式的int值标识：https://developer.android.com/reference/android/media/AudioManager#RINGER_MODE_SILENT</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>int RINGER_MODE_SILENT = 0;
int RINGER_MODE_VIBRATE = 1;
int RINGER_MODE_NORMAL = 2;
</code></pre></div> </div> </blockquote> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"audio"</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">IAudio</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">getRingerMode</span><span class="o">();</span>
  
  	<span class="c1">// https://developer.android.com/reference/android/media/AudioManager#setRingerMode(int)</span>
    <span class="kt">void</span> <span class="nf">setRingerMode</span><span class="o">(</span><span class="kt">int</span> <span class="n">ringerMode</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p> </p> <h3 id="0515-battery"> <a href="#0515-battery" class="anchor-heading" aria-labelledby="0515-battery"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.15. Battery </h3> <p>Battery相关。</p> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>getBatteryState</td> <td>获取电池状态</td> <td>无</td> <td>参考下方例子</td> <td>BatteryState</td> </tr> </tbody> </table></div> <p>BatteryState类型定义：</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">data class</span> <span class="nc">BatteryState</span><span class="p">(</span>
    <span class="c1">// 电量</span>
    <span class="kd">val</span> <span class="py">batteryLevel</span><span class="p">:</span> <span class="nc">Int</span> <span class="p">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="c1">// 是否在充电</span>
    <span class="kd">val</span> <span class="py">isCharging</span><span class="p">:</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
    <span class="c1">// 是否在AC充电</span>
    <span class="kd">val</span> <span class="py">isAcCharge</span><span class="p">:</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
    <span class="c1">// 是否在USB充电</span>
    <span class="kd">val</span> <span class="py">isUsbCharge</span><span class="p">:</span> <span class="nc">Boolean</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"battery"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IBattery</span> <span class="o">{</span>
    <span class="nc">BatteryState</span> <span class="nf">getBatteryState</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div> <p>使用举例，获取电池电量：<code class="language-plaintext highlighter-rouge">battery.getBatteryState().batteryLevel </code></p> <p> </p> <h3 id="0516-context"> <a href="#0516-context" class="anchor-heading" aria-labelledby="0516-context"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.16. Context </h3> <p>Android System <a href="https://developer.android.com/reference/android/content/Context">Context</a>，Android系统上下文。 基于Context可以实现更丰富的功能调用。举例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Use System Context"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"调用Context，获取当前User信息"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"screenOn == true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showShortToast(</span><span class="se">\"</span><span class="s2">User info: </span><span class="se">\"</span><span class="s2"> + context.getSystemService(context.USER_SERVICE).getUserInfo(android.os.UserHandle.getCallingUserId()).name);"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="0517-thanos"> <a href="#0517-thanos" class="anchor-heading" aria-labelledby="0517-thanos"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.17. Thanos </h3> <p>你可以使用thanox或thanos来调用<a href="https://github.com/Tornaco/Thanox/blob/master/android/android_framework/base/src/main/java/github/tornaco/android/thanos/core/app/ThanosManager.java">Thanos API</a>，举例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Thanos API"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example actions with thanos API"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frontPkgChanged == true &amp;&amp; to == </span><span class="se">\"</span><span class="s2">com.tencent.mm</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"thanos.getProfileManager().enableRuleByName(</span><span class="se">\"</span><span class="s2">my_we_chat_rule</span><span class="se">\"</span><span class="s2">);"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <h3 id="0518-actor废弃"> <a href="#0518-actor废弃" class="anchor-heading" aria-labelledby="0518-actor废弃"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.5.18. Actor(废弃) </h3> <p><del>情景模式Action相关，目前支持Action的延迟执行。</del></p> <p>Actor已被废弃：请使用delay属性实现延迟效果。例如：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Delayed action example"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"delay"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <div class="table-wrapper"><table> <thead> <tr> <th>能力</th> <th>含义</th> <th>参数</th> <th>举例</th> <th>返回值</th> </tr> </thead> <tbody> <tr> <td>delayed</td> <td>延迟执行一个Action</td> <td>延迟毫秒数，Action表达式</td> <td>无</td> <td>无</td> </tr> </tbody> </table></div> <p>接口定义：</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@HandlerName</span><span class="o">(</span><span class="s">"actor"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IActor</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">delayed</span><span class="o">(</span><span class="kt">long</span> <span class="n">delayMillis</span><span class="o">,</span> <span class="nc">String</span> <span class="n">action</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <p>举例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Delayed action example"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Execute the action delay 2s: show a short toast and log the event 2s after app switched."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frontPkgChanged == true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"actor.delayed(2000, </span><span class="se">\"</span><span class="s2">ui.showShortToast(</span><span class="se">\\\"</span><span class="s2">App switched 2s ago</span><span class="se">\\\"</span><span class="s2">)</span><span class="se">\"</span><span class="s2">)"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"actor.delayed(2000, </span><span class="se">\"</span><span class="s2">log.log(to)</span><span class="se">\"</span><span class="s2">)"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p> </p> <p> </p> <h2 id="06-全局变量"> <a href="#06-全局变量" class="anchor-heading" aria-labelledby="06-全局变量"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 0.6. 全局变量 </h2> <p>全局变量：name-List<String>，名字---字符串列表</String></p> <p>可用于条件判断，事件处理等。</p> <p>Thanox支持创建，导入全局变量。发布事实时，你可以用过<code class="language-plaintext highlighter-rouge">globalVarOf$</code>拼接<code class="language-plaintext highlighter-rouge">变量名</code>来访问。以变量apps为例：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Use var example"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"应用切换时，如果当前前台应用在定义的变量列表apps中，Toast使用输出包名"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"condition"</span><span class="p">:</span><span class="w"> </span><span class="s2">"frontPkgChanged == true &amp;&amp; globalVarOf$apps.contains(to)"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ui.showShortToast(to);"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
